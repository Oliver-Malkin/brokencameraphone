{% extends "base.html" %}

{% block title %}{{ name }}{% endblock %}

{% block content %}

{% if own_profile == True %}
<p>Welcome to your profile {{name}}! Here you can view and change your settings and preferences.</p>

<div class="split equal">
    <div class="forms wide">
        <form action="/user/update_details" method="post">
            <h2>Change your details</h2>
            <input type="text" name="new_username" id="new_username" placeholder="Your new display name">
            <input type="email" name="new_email" id="new_email" placeholder="Your new email">
            <input type="submit" value="Update">
        </form>

        <form action="/user/update_password" method="post">
            <h2>Change your password</h2>
            <input type="password" name="current_passwd" id="current_passwd" placeholder="Your current password">
            <input type="password" name="new_passwd" id="new_passwd" placeholder="Your new password">
            <input type="password" name="new_passwd_check" id="new_passwd_check" placeholder="Repeat new password">
            <input type="submit" value="Update">
        </form>
    </div> 

    <div class="forms wide">
        <form action="/user/update_webhook" method="post">
            <h2>Change your webhooks</h2>
            <select name="webhook_selector">
                <option disabled selected> -- select an option -- </option>
                <option value="add_new">Add new webhook</option>
                {% for i in range(0, webhook_count) %}
                    <option value="{{ webhooks[i][0] }}">{{ webhooks[i][0] }}</option>
                {% endfor %}
            </select>
            <input type="text" name="friendly_name" id="friendly_name" placeholder="Friendly name">
            <input type="text" name="webhook_name" id="webhook_name" placeholder="Webhook endpoint URL">
            <br>
            <div class="row">
                <input type="submit" name="submit" value="Submit">
                <input class="right align" type="submit" name = "delete" value="Delete">
            </div>
        </form>

        <form action="/user/update_preferences" method="post">
            <h2>Your preferences</h2>
            <div class="row">
                <input class="top" type="checkbox" name="public_stats" id="public_stats" value="yes" {% if show_stats == True %}checked{% endif %}>
                <label class="regular">Display my stats on my profile to others</label><br>
            </div>
            <input type="submit" value="Save">
        </form>
    </div> 
</div>

{% else %}
<p>Welcome to {{name}}'s profile!<p></p>
{% endif %}

{% if user_id %}
<div class="grid">
    <p><a href="/logout">Log out</a> PLACEHOLDER <a href="#">Delete my personal data</a> PLACEHOLDER <a href="#">Delete my account</a></p>
</div>
{% endif %}

{% endblock %}